# Project Directory Sturcture
```js
.
├── Procfile
├── blog
│   └── migrations
├── catalog
│   ├── migrations
│   └── templatetags
├── debug.log
├── docs
│   └── project-structure.md
├── helios
│   └── settings
├── init_data.json
├── janusdb_data.sql
├── myapp.log
├── normal.log
├── products
│   └── migrations
├── scripts
│   ├── apache_helios.conf
│   ├── azure_pipelines
│   │   ├── deploy-helios-dev.yaml
│   │   ├── test-helios.yaml
│   │   └── update-helios-dev.yaml
│   └── startup
│       ├── deploy.sh
│       └── update.sh
├── static
│   ├── css
│   ├── img
│   │   └── jupiter-images
│   ├── js
│   │   ├── data
│   │   └── vue
│   │       ├── app
│   │       ├── components
│   │       ├── plugins
│   │       ├── store
│   │       └── templates
│   ├── products
│   └── whatwedo
├── subscriptions
│   ├── forms
│   └── migrations
├── templates
│   ├── account
│   │   └── ... alluth files
│   ├── blog
│   ├── openid ... alluth files
│   ├── products
│   ├── socialaccount
│   │   └── ... alluth files
│   ├── subscriptions
│   ├── users
│   └── worker
├── test
│   ├── dbtest
│   ├── eventhubtest
│   ├── instruments.json
│   └── websocket
│       └── instrument_send.json
├── users
│   ├── forms
│   └── migrations
└──| worker
   └── migrations

```

## App Division 
Project id divided into **4 main apps**.
1. Users : 
    - Store, operates all logic, working parts for users.
    - Groups formations, Referal code/link generation, User group mapping,  ... etc
    - Controlls views for : 
        - Dashboard
        - Feedback
        - Invoice (can only downloaded from here)
        - Allauth redirection

2. Products :
    - It stores all logic regarding products, till product formation.
    - Also store *user-product* filter here
    - It don't has any UI page as of now.
3. Subscriptions : 
    - It stores logic regarding plans formation, subscription, payments
    - There is strong linking with users in subscriptions module. 
    - Contians logic for razorpay order creations, and invoice generation
    - Controls views for:
        - Plans / Products Page
        - Plans Overview page
        - Payment Page
        - Invoice (Only created, no download from here)
4. Worker :
    - Its main product, stores logic for Websocket / Webpush / DB Connection ... etc
    - There is linking with all above modules in some way. Majorly linked with subscription module.
    - Controls views for :
        - Mercury Data Page
        - Webpush UI
        - DB calls fetch(asynchronous [JsonRespone])


## App directory structure
```js
./users/
├── __init__.py
├── migrations
│   ├── 0001_initial.py
│   ├── ...
│   └── __init__.py
├── admin.py
├── apps.py
├── views.py
├── models.py
├── tests.py
├── urls.py
└── "functions.py"
```
Every app has these files, everythings is same as Django files, just one more added file **`functions.py`**

1. __init__.py : 
    - to declare app as packacge
2. migrations :
    - Contains migrations generated by Django for the app models
3. admin.py : 
    - It controls the **`/admin`** page behavior for model.
    - Includes functionalty for
        - To register model in **`/admin`** page
        - Fields that are visible in models table on **`/admin`** page
        - Filters for models 
        - etc...
4. apps.py 
    - It is **Django Thing**
5. views.py 
    - It contains views for respective page, or json responder or intermidiates views(used while subscriptions).
    - > Note : No database calls are made in views.py, it calls a function in **`functions.py`** file for the same.
6. models.py
    - Models schema is define here,
    - Also contians any signal logic
    - Auto product / plans creation rest here
6. test.py
    - To write any custom test for the app
7. urls.py
    - app **urls** **`<-->`** **views** mapping
    - > user url.py also store logic to hide **/admin** page for non admin users.
8. functions.py
    - Its intermidate file if consider from data flow between **views** and **models(db)**.
    - Dataflow
        - > ui --> urls --> **views --> functions.py --> models(db) -->---> functions.py -->---> views** -->---> ui.
    - **`functions.py`** can include any models from any app for **ORM** querying
    - If views needs db access, there should be associated *function* for *functions* in **`functions.py`**.
    - It makes **ORM** query reusable.
    - It also store logic for filtering web push notification based on user preferenc(*speacial case*).


## Templates Directory
Templates makes UI, section of website, and are render on server side. So if page loading takes any times is sole due to server fault.
```js
./templates/
├── account
│   ├── email
│   ├── messages
│   └── snippets
├── blog
├── openid
├── products
├── socialaccount
│   ├── messages
│   └── snippets
│       └── const.py
├── subscriptions
├── tests
├── users
└── worker
└── "base.html"
```
It mains same, subdivision as apps division with som extra UI side sub division. Every app sub-folder contains the `base.html` which extends `base.html` parent dir, base.html. Except for Mercury Data page.

1. `base.html`
    - Contains base code for navbar and footer
    - includes base styles and js library
    - Bootstrap 4 and JQuery 3 is used.
2. Accounts:
    - Authenticaions templates, mainly manage by [allauth], here is git [allauth-git]
    - Only Login and SignUp page are customize
    - Algonauts headers is wraps, defaults **allauth**, plus django **from-crispy**
    - Includes **`openid`** and **`socialaccount`** directories in allauth
3. Blog
    - Blog 3 pages templates includes here
4. User
    - Contains pages
        - SignUp
        - Login
        - *... other authentication stuff*
        - Feedback
        - Dashboard
5. Products
    - No UI page for product
6. Subscriptions
    - Contains UI page for 
        - Product / Plans
            - Mercury
            - Jupiter
            - Plans Overview
            - Payment Scripts
7. Worker
    - Contains UI html page for
        - Mercury Data page


## Static Directory
```js
./static/
├── css
├── img
│   └── jupiter-images
├── js
│   ├── data
│   └── vue
│       ├── app
│       ├── components
│       ├── plugins
│       ├── store
│       └── templates
├── products
└── whatwedo
```
Static is details explain in [static], else folder structure is understandable by name itself

## References : 
- allauth : https://django-allauth.readthedocs.io/en/latest/overview.html
- allauth-git : https://github.com/pennersr/django-allauth 

[static]: ./static.md
[allauth]: https://django-allauth.readthedocs.io/en/latest/overview.html
[allauth-git]: https://github.com/pennersr/django-allauth